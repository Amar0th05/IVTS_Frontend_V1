<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile Modal</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://kit.fontawesome.com/1799ed0397.js" crossorigin="anonymous"></script>
  <style>
    .gradient-custom {
background:  linear-gradient(135deg, #69A1FF, #1E3FA0);      
color: #fff;
      border-radius: .5rem;
      transition: all 0.6s ease;
    }

    .profile-label {
      font-weight: 600;
      color: #444;
    }

    .editable {
      cursor: pointer;
      transition: 0.2s;
    }

    .editable:hover {
      background-color: #f8f9fa;
      border-radius: 5px;
      padding: 2px 4px;
    }

    .btn-change {
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 8px 18px;
      transition: 0.3s;
    }

    .btn-change:hover {
      background-color: #0056b3;
    }

    .slide-container {
      display: flex;
      flex-wrap: nowrap;
      overflow: hidden;
      transition: all 0.6s ease-in-out;
    }

    .profile-left {
      order: 0;
    }

    .profile-right {
      order: 1;
    }

    .reversed {
      flex-direction: row-reverse;
    }

    .slide-section {
      transition: opacity 0.4s ease, transform 0.4s ease;
    }

    .hidden-section {
      opacity: 0;
      transform: translateX(40px);
      pointer-events: none;
      position: absolute;
      width: 100%;
    }

    .visible-section {
      opacity: 1;
      transform: translateX(0);
      position: relative;
      width: 100%;
    }
  </style>
</head>
<body>

<!-- Profile Modal -->
<div class="modal fade" id="profileDetailsModal" tabindex="-1" aria-labelledby="profileDetailsLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">

      <!-- HEADER -->
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title"><i class="fa-solid fa-user me-2"></i><span id="modalTitle">Profile Details</span></h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- BODY -->
      <div class="modal-body">
        <div class="card border-0">
          <div id="slideContainer" class="slide-container">

            <!-- Profile Panel (moves left/right) -->
            <div id="profilePanel" class="col-md-4 gradient-custom text-center d-flex flex-column align-items-center justify-content-center p-4 profile-left">
              <img id="profileImage" src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava1-bg.webp"
                   alt="Avatar" class="img-fluid rounded-circle mb-3" style="width: 100px;">
              <h5 id="profileName" class="fw-bold mb-1">Kowshik M</h5>
              <p id="profileRole" class="mb-2">Web Developer</p>
              <i class="far fa-edit mt-2 mb-2" id="editProfile" style="cursor: pointer;" title="Edit Profile"></i>
            </div>

            <!-- Dynamic Content Panel -->
            <div class="col-md-8 position-relative p-4">
              <!-- Profile Info Section -->
              <div id="profileSection" class="slide-section visible-section">
                <h6 class="fw-bold mb-3">Personal Info</h6>
                <hr class="mt-0 mb-3">

                <div class="row">
                  <div class="col-6 mb-3">
                    <p class="profile-label">Firstname</p>
                    <p id="firstName" class="text-muted editable">Kowshik</p>
                  </div>
                  <div class="col-6 mb-3">
                    <p class="profile-label">Lastname</p>
                    <p id="lastName" class="text-muted editable">M</p>
                  </div>
                </div>

                <div class="row">
                  <div class="col-6 mb-3">
                    <p class="profile-label">Email ID</p>
                    <p id="emailId" class="text-muted editable">kowshikm0802@gmail.com</p>
                  </div>
                  <div class="col-6 mb-3">
                    <p class="profile-label">Phone No</p>
                    <p id="phoneNo" class="text-muted editable">9080020874</p>
                  </div>
                </div>

                <div class="text-start mt-3">
                  <button id="changePasswordBtn" class="btn-change">
                    <i class="fa-solid fa-key me-2"></i>Change Password
                  </button>
                </div>
              </div>

              <!-- Change Password Section -->
              <div id="passwordSection" class="slide-section hidden-section">
                <h6 class="fw-bold mb-3"><i class="fa-solid fa-key me-2"></i>Change Password</h6>
                <hr>
                <form id="passwordForm" class="mt-3">
                  <div class="mb-3">
                    <label for="oldPassword" class="form-label">Old Password</label>
                    <input type="password" class="form-control" id="oldPassword" required>
                  </div>
                  <div class="mb-3">
                    <label for="newPassword" class="form-label">New Password</label>
                    <input type="password" class="form-control" id="newPassword" required>
                  </div>
                  <div class="mb-3">
                    <label for="confirmPassword" class="form-label">Confirm Password</label>
                    <input type="password" class="form-control" id="confirmPassword" required>
                  </div>

                  <div class="d-flex justify-content-between mt-4">
                    <button type="button" class="btn btn-outline-secondary" id="backToProfile">
                      <i class="fa-solid fa-arrow-left me-2"></i>Back
                    </button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                  </div>
                </form>
              </div>

            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Inline editing
  function attachInlineEdit(element) {
    element.addEventListener('click', function() {
      const currentText = this.textContent;
      const input = document.createElement('input');
      input.type = 'text';
      input.value = currentText;
      input.classList.add('form-control', 'form-control-sm');
      this.replaceWith(input);
      input.focus();
      const save = () => {
        const newValue = input.value.trim() || currentText;
        const newP = document.createElement('p');
        newP.textContent = newValue;
        newP.classList.add('text-muted', 'editable');
        newP.id = this.id;
        input.replaceWith(newP);
        attachInlineEdit(newP);
      };
      input.addEventListener('blur', save);
      input.addEventListener('keypress', e => { if (e.key === 'Enter') save(); });
    });
  }
  document.querySelectorAll('.editable').forEach(el => attachInlineEdit(el));

  // Sections and transitions
  const profileSection = document.getElementById('profileSection');
  const passwordSection = document.getElementById('passwordSection');
  const modalTitle = document.getElementById('modalTitle');
  const slideContainer = document.getElementById('slideContainer');

  document.getElementById('changePasswordBtn').addEventListener('click', () => {
    profileSection.classList.replace('visible-section', 'hidden-section');
    passwordSection.classList.replace('hidden-section', 'visible-section');
    slideContainer.classList.add('reversed'); // move profile panel to right
    modalTitle.textContent = 'Change Password';
  });

  document.getElementById('backToProfile').addEventListener('click', () => {
    passwordSection.classList.replace('visible-section', 'hidden-section');
    profileSection.classList.replace('hidden-section', 'visible-section');
    slideContainer.classList.remove('reversed'); // move profile panel back to left
    modalTitle.textContent = 'Profile Details';
  });

  // Password form logic
  document.getElementById('passwordForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const newPass = document.getElementById('newPassword').value;
    const confirmPass = document.getElementById('confirmPassword').value;
    if (newPass !== confirmPass) {
      alert('New password and confirmation do not match!');
      return;
    }
    alert('Password changed successfully (demo only)');
    document.getElementById('backToProfile').click();
    this.reset();
  });
</script>

<!-- DEMO TRIGGER -->
<div class="text-center mt-5">
  <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#profileDetailsModal">Open Profile</button>
</div>

</body>
</html>
